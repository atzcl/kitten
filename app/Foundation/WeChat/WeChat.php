<?phpdeclare(strict_types = 1);/*+-----------------------------------------------------------------------------------------------------------------------| Author: 植成樑 <atzcl0310@gmail.com>  Blog：https://www.atzcl.cn+-----------------------------------------------------------------------------------------------------------------------| EasyWeChat 适配 laravel|*/namespace App\Foundation\WeChat;use EasyWeChat\Work\Application as Work;use EasyWeChat\Payment\Application as Payment;use EasyWeChat\MiniProgram\Application as MiniProgram;use EasyWeChat\OpenPlatform\Application as OpenPlatform;use EasyWeChat\OfficialAccount\Application as OfficialAccount;class WeChat{    /**     * 获取微信配置 [ 这里预留以后动态获取、多公众号开发 ]     *     * @param string $type     * @return \Illuminate\Config\Repository|mixed     */    public function setupConfig(string $type = 'official_account')    {        return array_merge(config('wechat.defaults'), config('wechat.' . $type . '.default'));    }    /**     * 创建对应的 WeChat 功能对象     *     * @param string $type     * @return mixed     */    public function getWeChatApp(string $type = 'official_account')    {        // 获取对应配置        $config = $this->setupConfig($type);        // EasyWeChat 提供的功能类        $apps = [            'official_account' => OfficialAccount::class,            'work' => Work::class,            'mini_program' => MiniProgram::class,            'payment' => Payment::class,            'open_platform' => OpenPlatform::class,        ];        // 实例对应的功能类        $app = new $apps[$type]($config);        // 判断是否使用 Laravel 自带的缓存系统        if ($config['use_laravel_cache']) {            // 接管缓存            $app['cache'] = new CacheBridge(app()['cache.store']);        }        return $app;    }    /**     * 公众号     *     * @return \EasyWeChat\OfficialAccount\Application     */    public function officialAccount()    {        return $this->getWeChatApp();    }    /**     * 小程序     *     * @return \EasyWeChat\MiniProgram\Application     */    public function miniProgram()    {        return $this->getWeChatApp('mini_program');    }    /**     * 微信支付     *     * @return \EasyWeChat\Payment\Application     */    public function payment()    {        return $this->getWeChatApp('payment');    }    /**     * 企业微信     *     * @return \EasyWeChat\Work\Application     */    public function work()    {        return $this->getWeChatApp('work');    }    /**     * 第三方开放平台     *     * @return \EasyWeChat\OpenPlatform\Application     */    public function openPlatform()    {        return $this->getWeChatApp('open_platform');    }}